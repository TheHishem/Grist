<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Synchro Tags</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 10px;
    }
    .tag {
      display: inline-block;
      padding: 4px 8px;
      margin: 2px;
      border-radius: 6px;
      font-weight: bold;
      color: white;
    }
    .synchrone {
      background-color: crimson;
    }
    .asynchrone {
      background-color: seagreen;
    }
  </style>
</head>
<body>
  <div id="output">Chargement…</div>

  <script>
    window.addEventListener("message", (event) => {
      const data = event.data;
      if (!data || !data.tableData) return;

      const rows = data.tableData;
      const div = document.getElementById("output");
      div.innerHTML = '';

      for (const row of rows) {
        const cell = row[0];  // première colonne affichée
        const container = document.createElement("div");

        if (Array.isArray(cell)) {
          // Choix multiples
          for (const val of cell) {
            const tag = document.createElement("span");
            const lower = val.toLowerCase();
            tag.className = "tag " + lower;
            tag.textContent = val;
            container.appendChild(tag);
          }
        } else if (typeof cell === 'string') {
          // Choix simple
          const tag = document.createElement("span");
          const lower = cell.toLowerCase();
          tag.className = "tag " + lower;
          tag.textContent = cell;
          container.appendChild(tag);
        }

        div.appendChild(container);
      }
    }, false);
  </script>
</body>
</html>
